{% load humanize %}
{% include 'header.html' %}

<div class="container">
<h1>{{ node.name }}</h1>
<div class="row">


<div class="col-md-6">
<h2>Grouped Resources</h2>

<table class="table">
    <thead>
    </thead>
    <tbody>
    {% for group in groups %}
    <tr>
        <td><a href="{% url 'list_resources' group.id %}">{{ group.current_path }}</a></td>
    </tr>
    {% endfor %}
    </tbody>
</table>
</div>

<div class="col-md-6">

<h2>Latest Commands</h2>
<div class="table-responsive">
<table class="table table-hover table-active">
    <thead class="thead-dark">
        <tr>
            <th>Command</th>
            <th>Exit</th>
            <th class="text-right">Timestamp</th>
        </tr>
    </thead>
    <tbody>
    {% if recent_commands %}
    {% for command in recent_commands %}
    <tr>
        <td>
            <a href="{% url 'detail_command' command.id %}"><pre style="white-space: pre-wrap; width: auto; font-size:0.75em; margin:0"><code>{{ command.cmd_str|truncatechars:48 | escape }}</code></pre></a>
        </td>
        <td>
            {% if command.return_code == 0 %}
                <span class="badge badge-success">{{ command.return_code }}</span>
            {% else %}
                <span class="badge badge-danger">{{ command.return_code }}</span>
            {% endif %}
        </td>
        <td class="text-right" style="white-space:nowrap;">
            {{ command.finished_at | naturaltime }}<br/>
            <span style="font-size:0.75em;">{{ command.finished_at }}</span>
        </td>
    </tr>
    {% endfor %}
    {% else %}
    <tr>
        <td>No history.</td>
    </tr>
    {% endif %}
    </tbody>
</table>
</div>
</div>


</div>

{% include 'footer.html' %}

